generator client {
  provider = "prisma-client-js"
}

generator docs {
  provider              = "node node_modules/prisma-docs-generator"
  includeRelationFields = "true"
}

datasource db {
  provider     = "postgres"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model ActividadExtra {
  Id           Int                @id @default(autoincrement())
  Nombre       String?            @db.VarChar(50)
  Descripcion  String?            @db.VarChar(200)
  Precio       Decimal?           @db.Decimal(10, 2)
  Imagen       String?            @db.VarChar(200)
  Fecha_Inicio DateTime?          @db.Date
  Fecha_Fin    DateTime?          @db.Date
  Usuario      UsuarioActividad[]
}

model UsuarioActividad {
  Id_Usuario   Int
  Id_Actividad Int
  Actividad    ActividadExtra @relation(fields: [Id_Actividad], references: [Id])

  @@id([Id_Usuario, Id_Actividad])
  @@index([Id_Usuario])
  @@index([Id_Actividad])
}

model grados {
  Id        Int     @id @default(autoincrement())
  Nombre    String? @db.VarChar(20)
  IdPeriodo Int

  @@index([IdPeriodo], map: "IdPeriodo")
}

model grupos {
  Id      Int     @id @default(autoincrement())
  Nombre  String? @db.VarChar(50)
  Cupo    Int?
  IdGrado Int

  @@index([IdGrado], map: "IdGrado")
}

model pagos {
  Id         Int      @id @default(autoincrement())
  Monto      Decimal  @db.Decimal(10, 2)
  Fecha_Pago DateTime @default(now()) @db.Timestamp(0)
  MetodoPago Int
  Referencia String   @db.Char(10)
  Estado     String   @db.VarChar(50)
  Id_Usuario Int

  @@index([Id_Usuario], map: "Idx_Usuario")
}

model pagosActividades {
  Id_Pago      Int
  Id_Actividad Int

  @@id([Id_Actividad, Id_Pago])
  @@index([Id_Actividad])
  @@index([Id_Pago])
}

model periodos {
  Id           Int       @id @default(autoincrement())
  Nombre       String?   @db.VarChar(100)
  Precio       Decimal?  @db.Decimal(10, 2)
  Fecha_Inicio DateTime? @db.Date
  Fecha_Fin    DateTime? @db.Date
}

model usuarios {
  Id                Int     @id @default(autoincrement())
  Nombre            String? @db.VarChar(100)
  CorreoElectronico String? @unique @db.VarChar(50)
  Contrasena        String? @db.VarChar(200)
  FotoPerfil        String? @db.VarChar(200)
  Id_Grupo          Int?
  Rol               String? @db.VarChar(50)
  Id_tutor          Int?
  ApellidoM         String? @db.VarChar(100)
  ApellidoP         String? @db.VarChar(100)

  @@index([Id_Grupo], map: "Id_Grupo")
  @@index([Id_tutor])
}
